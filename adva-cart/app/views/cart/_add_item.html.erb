<%= form_for Cart.new(:items => [Item.new(:quantity => 1, :product => resource)]), :url => url_for(:cart), :html => { :method => :put } do |f| %>
  <%= hidden_field_tag :return_to, request.url %>
  <%= f.fields_for(:items) do |i| %>
    <%= i.hidden_field :product_id %>

    <%= i.label :quantity %>
    <%= i.text_field :quantity %>
  <% end %>

  <%= submit_tag t('.submit') %>
<% end %>